@model IEnumerable<StudentApp.Models.Envanterler>

@{
<<<<<<< Updated upstream
<<<<<<< Updated upstream
    ViewData["Title"] = "Envanter Yï¿½netimi";
    var toplamDeger = ViewBag.ToplamDeger as decimal? ?? 0;
=======
    ViewData["Title"] = "Envanter Yönetimi";
    var toplamSatisDeger = ViewBag.ToplamSatisDeger as decimal? ?? 0;
>>>>>>> Stashed changes
=======
    ViewData["Title"] = "Envanter Yönetimi";
    var toplamSatisDeger = ViewBag.ToplamSatisDeger as decimal? ?? 0;
>>>>>>> Stashed changes
    var toplamKalem = ViewBag.ToplamKalem as int? ?? 0;
    var toplamAdet = ViewBag.ToplamAdet as int? ?? 0;
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-boxes me-2"></i>Envanter Yï¿½netimi</h2>
    <a asp-action="Create" class="btn btn-success">
        <i class="fas fa-plus me-1"></i>Yeni Envanter Ekle
    </a>
</div>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="fas fa-check-circle me-2"></i>@TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="fas fa-exclamation-circle me-2"></i>@TempData["ErrorMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<!-- Arama ve Filtre -->
<div class="card mb-4">
    <div class="card-body">
        <form asp-action="Index" method="get" class="row g-3 align-items-end">
<<<<<<< Updated upstream
<<<<<<< Updated upstream
       <div class="col-md-8">
       <label for="searchTerm" class="form-label">
              <i class="fas fa-search me-1"></i>Envanter Ara
    </label>
        <input type="text" name="searchTerm" id="searchTerm" class="form-control" 
placeholder="Envanter adï¿½, aï¿½ï¿½klama veya fiyat aralï¿½ï¿½ï¿½..." 
     value="@ViewBag.SearchTerm" />
  </div>
       <div class="col-md-2">
    <label for="stokDurumu" class="form-label">
  <i class="fas fa-filter me-1"></i>Stok Durumu
                </label>
      <select name="stokDurumu" id="stokDurumu" class="form-select">
       <option value="">Tï¿½mï¿½</option>
          <option value="stokta" selected="@(ViewBag.StokDurumu == "stokta" ? "selected" : null)">Stokta Var</option>
      <option value="tukendi" selected="@(ViewBag.StokDurumu == "tukendi" ? "selected" : null)">Tï¿½kendi</option>
      <option value="azaldi" selected="@(ViewBag.StokDurumu == "azaldi" ? "selected" : null)">Stok Azaldï¿½ (?5)</option>
  </select>
=======
            <div class="col-md-8">
                <label for="searchTerm" class="form-label">
                    <i class="fas fa-search me-1"></i>Envanter Ara
                </label>
=======
            <div class="col-md-8">
                <label for="searchTerm" class="form-label">
                    <i class="fas fa-search me-1"></i>Envanter Ara
                </label>
>>>>>>> Stashed changes
                <input type="text" name="searchTerm" id="searchTerm" class="form-control"
                       placeholder="Envanter adý, açýklama veya fiyat aralýðý..."
                       value="@ViewBag.SearchTerm" />
            </div>
            <div class="col-md-2">
                <label for="stokDurumu" class="form-label">
                    <i class="fas fa-filter me-1"></i>Stok Durumu
                </label>
                <select name="stokDurumu" id="stokDurumu" class="form-select">
                    <option value="">Tümü</option>
                    <option value="stokta" selected="@(ViewBag.StokDurumu == "stokta" ? "selected" : null)">Stokta Var</option>
                    <option value="tukendi" selected="@(ViewBag.StokDurumu == "tukendi" ? "selected" : null)">Tükendi</option>
                    <option value="azaldi" selected="@(ViewBag.StokDurumu == "azaldi" ? "selected" : null)">Stok Azaldý (?5)</option>
                </select>
            </div>
            <div class="col-md-2 d-flex gap-2">
                <button type="submit" class="btn btn-primary flex-grow-1">
                    <i class="fas fa-search me-1"></i>Ara
                </button>
                @if (!string.IsNullOrEmpty(ViewBag.SearchTerm as string) || !string.IsNullOrEmpty(ViewBag.StokDurumu as string))
                {
                    <a asp-action="Index" class="btn btn-outline-secondary" title="Filtreyi Temizle">
                        <i class="fas fa-times"></i>
                    </a>
                }
<<<<<<< Updated upstream
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
            </div>
        </form>
    </div>
</div>

<!-- ï¿½statistik Kartlarï¿½ -->
<div class="row mb-4">
    <div class="col-md-4">
        <div class="card bg-primary text-white">
            <div class="card-body">
<<<<<<< Updated upstream
<<<<<<< Updated upstream
         <h5 class="card-title">
         <i class="fas fa-list me-2"></i>Toplam Kalem
      </h5>
          <h3 class="mb-0">@toplamKalem</h3>
                <small>Farklï¿½ envanter kalemi</small>
         </div>
        </div>
    </div>
 <div class="col-md-4">
      <div class="card bg-info text-white">
   <div class="card-body">
     <h5 class="card-title">
   <i class="fas fa-cubes me-2"></i>Toplam Adet
              </h5>
        <h3 class="mb-0">@toplamAdet</h3>
   <small>Toplam ï¿½rï¿½n adedi</small>
     </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card bg-success text-white">
        <div class="card-body">
    <h5 class="card-title">
       <span style="font-family: Arial, sans-serif;">&#8378;</span> Toplam Alï¿½ï¿½ Deï¿½er
   </h5>
       <h3 class="mb-0"><span style="font-family: Arial, sans-serif;">&#8378;</span> @toplamDeger.ToString("N2")</h3>
   <small>Envanter toplam alï¿½ï¿½ deï¿½eri</small>
     </div>
     </div>
=======
                <h5 class="card-title">
                    <i class="fas fa-list me-2"></i>Toplam Kalem
                </h5>
                <h3 class="mb-0">@toplamKalem</h3>
                <small>Farklý envanter kalemi</small>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card bg-info text-white">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="fas fa-cubes me-2"></i>Toplam Adet
                </h5>
                <h3 class="mb-0">@toplamAdet</h3>
                <small>Toplam ürün adedi</small>
            </div>
        </div>
    </div>
    <div class="col-md-4">
=======
                <h5 class="card-title">
                    <i class="fas fa-list me-2"></i>Toplam Kalem
                </h5>
                <h3 class="mb-0">@toplamKalem</h3>
                <small>Farklý envanter kalemi</small>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card bg-info text-white">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="fas fa-cubes me-2"></i>Toplam Adet
                </h5>
                <h3 class="mb-0">@toplamAdet</h3>
                <small>Toplam ürün adedi</small>
            </div>
        </div>
    </div>
    <div class="col-md-4">
>>>>>>> Stashed changes
        <div class="card bg-success text-white">
            <div class="card-body">
                <h5 class="card-title">
                    <span style="font-family: Arial, sans-serif;">&#8378;</span> Toplam Satýþ Deðer
                </h5>
                <h3 class="mb-0"><span style="font-family: Arial, sans-serif;">&#8378;</span> @toplamSatisDeger.ToString("N2")</h3>
                <small>Envanter toplam potansiyel satýþ deðeri</small>
            </div>
        </div>
<<<<<<< Updated upstream
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
    </div>
</div>

@if (Model.Any())
{
    <div class="card">
        <div class="card-body">
<<<<<<< Updated upstream
<<<<<<< Updated upstream
 <div class="table-responsive">
     <table class="table table-striped table-hover" id="envanterTable">
          <thead>
      <tr>
       <th>
          <i class="fas fa-box me-1"></i>Envanter Adï¿½
         </th>
    <th class="text-center">
   <i class="fas fa-sort-numeric-up me-1"></i>Adet
       </th>
       <th class="text-end">
      <i class="fas fa-shopping-cart me-1"></i>Alï¿½ï¿½ Fiyatï¿½
   </th>
  <th class="text-end">
    <i class="fas fa-tag me-1"></i>Satï¿½ï¿½ Fiyatï¿½
     </th>
     <th class="text-end">
    <i class="fas fa-calculator me-1"></i>Toplam Alï¿½ï¿½ Deï¿½eri
  </th>
       <th class="text-center">
    <i class="fas fa-toggle-on me-1"></i>Durum
</th>
      <th>
    <i class="fas fa-comment me-1"></i>Aï¿½ï¿½klama
    </th>
       <th class="text-center">ï¿½ï¿½lemler</th>
  </tr>
            </thead>
        <tbody>
        @foreach (var item in Model)
     {
 var toplamDegerItem = item.Adet * item.AlisFiyat;
      <tr>
    <td>
     <strong>@item.EnvanterAdi</strong>
        </td>
       <td class="text-center">
     <span class="badge bg-info fs-6">@item.Adet</span>
 </td>
    <td class="text-end">
    <span style="font-family: Arial, sans-serif;">&#8378;@item.AlisFiyat.ToString("N2")</span>
     </td>
       <td class="text-end">
  <span style="font-family: Arial, sans-serif;">&#8378;@item.SatisFiyat.ToString("N2")</span>
  </td>
      <td class="text-end">
     <strong style="font-family: Arial, sans-serif;">&#8378;@toplamDegerItem.ToString("N2")</strong>
     </td>
   <td class="text-center">
   @if (item.Aktif)
      {
       <span class="badge bg-success">
        <i class="fas fa-check-circle me-1"></i>Aktif
    </span>
    }
 else
      {
   <span class="badge bg-secondary">
   <i class="fas fa-times-circle me-1"></i>Pasif
  </span>
       }
      </td>
      <td>
   @if (!string.IsNullOrWhiteSpace(item.Aciklama))
          {
    <small>@item.Aciklama</small>
     }
   else
       {
   <span class="text-muted">-</span>
   }
  </td>
     <td class="text-center">
      <div class="btn-group" role="group">
       <a asp-action="Details" asp-route-id="@item.Id"
    class="btn btn-sm btn-outline-info" title="Detaylarï¿½ Gï¿½rï¿½ntï¿½le">
   <i class="fas fa-eye"></i>
   </a>
         <a asp-action="Edit" asp-route-id="@item.Id"
        class="btn btn-sm btn-outline-warning" title="Dï¿½zenle">
  <i class="fas fa-edit"></i>
 </a>
      <a asp-action="Delete" asp-route-id="@item.Id"
         class="btn btn-sm btn-outline-danger" title="Sil">
  <i class="fas fa-trash"></i>
      </a>
    </div>
      </td>
 </tr>
      }
 </tbody>
     </table>
=======
=======
>>>>>>> Stashed changes
            <div class="table-responsive">
                <table class="table table-striped table-hover" id="envanterTable">
                    <thead>
                        <tr>
                            <th>
                                <i class="fas fa-box me-1"></i>Envanter Adý
                            </th>
                            <th class="text-center">
                                <i class="fas fa-sort-numeric-up me-1"></i>Adet
                            </th>
@*                             <th class="text-end">
                                <i class="fas fa-shopping-cart me-1"></i>Alýþ Fiyatý
                            </th> *@
                            <th class="text-end">
                                <i class="fas fa-tag me-1"></i>Satýþ Fiyatý
                            </th>
@*                             <th class="text-end">
                                <i class="fas fa-calculator me-1"></i>Toplam Alýþ Deðeri
                            </th> *@
                            <th class="text-center">
                                <i class="fas fa-toggle-on me-1"></i>Durum
                            </th>
                            <th>
                                <i class="fas fa-comment me-1"></i>Açýklama
                            </th>
                            <th class="text-center">Ýþlemler</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            var toplamDegerItem = item.Adet * item.AlisFiyat;
                            <tr>
                                <td>
                                    <strong>@item.EnvanterAdi</strong>
                                </td>
                                <td class="text-center">
                                    <span class="badge bg-info fs-6">@item.Adet</span>
                                </td>
@*                                 <td class="text-end">
                                    <span style="font-family: Arial, sans-serif;">&#8378;@item.AlisFiyat.ToString("N2")</span>
                                </td> *@
                                <td class="text-end">
                                    <span style="font-family: Arial, sans-serif;">&#8378;@item.SatisFiyat.ToString("N2")</span>
                                </td>
@*                                 <td class="text-end">
                                    <strong style="font-family: Arial, sans-serif;">&#8378;@toplamDegerItem.ToString("N2")</strong>
                                </td> *@
                                <td class="text-center">
                                    @if (item.Aktif)
                                    {
                                        <span class="badge bg-success">
                                            <i class="fas fa-check-circle me-1"></i>Aktif
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-secondary">
                                            <i class="fas fa-times-circle me-1"></i>Pasif
                                        </span>
                                    }
                                </td>
                                <td>
                                    @if (!string.IsNullOrWhiteSpace(item.Aciklama))
                                    {
                                        <small>@item.Aciklama</small>
                                    }
                                    else
                                    {
                                        <span class="text-muted">-</span>
                                    }
                                </td>
                                <td class="text-center">
                                    <div class="btn-group" role="group">
                                        <a asp-action="Details" asp-route-id="@item.Id"
                                           class="btn btn-sm btn-outline-info" title="Detaylarý Görüntüle">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a asp-action="Edit" asp-route-id="@item.Id"
                                           class="btn btn-sm btn-outline-warning" title="Düzenle">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <a asp-action="Delete" asp-route-id="@item.Id"
                                           class="btn btn-sm btn-outline-danger" title="Sil">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
<<<<<<< Updated upstream
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
            </div>
        </div>
    </div>
}
else
{
    <div class="alert alert-info" role="alert">
        <i class="fas fa-info-circle me-2"></i>
        Henï¿½z envanter kaydï¿½ bulunmamaktadï¿½r. Yeni envanter eklemek iï¿½in yukarï¿½daki butonu kullanabilirsiniz.
    </div>
}

@section Scripts {
    <script>
            // DataTable initialization
             $(document).ready(function() {
                    $('#envanterTable').DataTable({
            language: {
          url: '//cdn.datatables.net/plug-ins/1.13.7/i18n/tr.json'
                   },
        order: [[0, 'asc']],
                   pageLength: 25,
                   responsive: true
                    });
                });
    </script>
}
